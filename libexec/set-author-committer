#!/bin/sh

# Export variable to git subshell to prevent recursion
[ -n "$HOOK_FIRED" ] && exit 0
export HOOK_FIRED=YES

# Set this commit's committer
git config --local user.email $(pear get-committer)

# Save the current author before author/committer reassignment
author=$(pear get-author)
pear cycle

# The commit line must run last
git commit --allow-empty --amend --author "Pear <$author>" --no-edit --quiet 
